syntax = "proto3";

package sign;

option go_package = "tecdsa/proto/sign";

service SignService {
  rpc Sign(stream SignMessage) returns (stream SignMessage);
}

message SignMessage {
  oneof msg {
    SignRequest signRequest = 1;
    Round1Request round1Request = 2;
    Round1Response round1Response = 3;
    Round2Request round2Request = 4;
    Round2Response round2Response = 5;
    Round3Request round3Request = 6;
    Round3Response round3Response = 7;
    Round4Request round4Request = 8;
    Round4Response round4Response = 9;
    SignResponse signResponse = 10;
  }
}

message SignRequest {
  string address = 1;
  bytes secret_key = 2;
  bytes message = 3;
}

message Round1Request {
  bytes payload = 1;
}

message Round1Response {
  bytes payload = 1;
}

message Round2Request {
  bytes payload = 1;
}

message Round2Response {
  bytes payload = 1;
}

message Round3Request {
  bytes payload = 1;
}

message Round3Response {
  bytes payload = 1;
}

message Round4Request {
  bytes payload = 1;
}

message Round4Response {
  bytes payload = 1;
}

message SignResponse {
  bytes payload = 1;
}
